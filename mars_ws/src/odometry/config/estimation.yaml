# For parameter descriptions, please refer to the template parameter files for each node.

# ukf_se_odom:
# # ekf_se_odom:
#   ros__parameters:
#     frequency: 15.0
#     sensor_timeout: 0.1
#     two_d_mode: true
#     transform_time_offset: 0.0
#     transform_timeout: 0.0
#     print_diagnostics: true
#     debug: false
#     publish_tf: true

#     map_frame: map
#     odom_frame: odom
#     base_link_frame: base_link
#     world_frame: odom

#     odom0: zed/zed_node/odom
#     odom0_config: [true, true, false,
#                    false, false, true,
#                    false, false, false,
#                    false, false, false,
#                    false, false, false]
#     odom0_queue_size: 10
#     # odom0_nodelay: true
#     odom0_differential: false
#     odom0_relative: false

#     # odom0: odometry/wheel
#     # odom0_config: [false, false, false,
#     #                false, false, false,
#     #                true,  true,  true,
#     #                false, false, true,
#     #                false, false, false]
#     # odom0_queue_size: 10
#     # odom0_nodelay: true
#     # odom0_differential: false
#     # odom0_relative: false


#     # This looks wrong to me. I dont think it should be fusing yaw from imu data because its already fused with the odom in the zed
#     # as well as the yaw value from the madgewick filter is a global fixed frame
#     # imu0: imu/data
#     # imu0_config: [false, false, false,
#     #           true,  true,  true,
#     #           false, false, false,
#     #           false,  false,  false,
#     #           false,  false,  false]
#     # # imu0_config: [false, false, false,
#     # #               true,  true,  false,
#     # #               false, false, false,
#     # #               true,  true,  true,
#     # #               true,  true,  true]
#     # imu0_nodelay: false
#     # imu0_differential: false
#     # imu0_relative: false
#     # imu0_queue_size: 10
#     # imu0_remove_gravitational_acceleration: true

#     use_control: false

#     # process_noise_covariance: [1e-3, 0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    1e-3, 0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    1e-3, 0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0.3,  0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0.3,  0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0.01, 0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0.5,   0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0.5,   0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0.1,  0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0.3,  0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0.3,  0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0.3,  0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0.3,  0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0.3,  0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0.3]

#     # initial_estimate_covariance: [1e-9, 0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    1e-9, 0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    1e-9, 0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    1.0,  0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    1.0,  0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    1e-9, 0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    1.0,  0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    1.0,  0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    1.0,  0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    1.0,   0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     1.0,   0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     1.0,   0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     1.0,  0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    1.0,  0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    1.0]

# ukf_se_map:
# # ekf_se_map:
#   ros__parameters:
#     frequency: 15.0
#     sensor_timeout: 0.1
#     two_d_mode: true
#     transform_time_offset: 0.0
#     transform_timeout: 0.0
#     print_diagnostics: true
#     debug: false
#     publish_tf: true

#     map_frame: map
#     odom_frame: odom
#     base_link_frame: base_link
#     world_frame: map

#     # odom0: zed/zed_node/odom
#     # odom0_config: [true, true, false,
#     #                false, false, true,
#     #                false,  false,  false,
#     #                false, false, false,
#     #                false, false, false]
#     # odom0_queue_size: 10
#     # odom0_nodelay: true
#     # odom0_differential: true
#     # odom0_relative: true

#     # odom0: odometry/wheel
#     # odom0_config: [false, false, false,
#     #                false, false, false,
#     #                true,  true,  true,
#     #                false, false, true,
#     #                false, false, false]
#     # odom0_queue_size: 10
#     # odom0_nodelay: true
#     # odom0_differential: false
#     # odom0_relative: false

#     odom1: odometry/gps
#     odom1_config: [true,  true,  false,
#                   false, false, false,
#                   false, false, false,
#                   false, false, false,
#                   false, false, false]
#     odom1_queue_size: 10
#     odom1_nodelay: true
#     odom1_differential: false
#     odom1_relative: false

#     imu0: imu/data
#     imu0_config: [false, false, false,
#                 false,  false,  true,
#                 false, false, false,
#                 false,  false,  false,
#                 true,  true,  false]

#     imu0_nodelay: true
#     imu0_differential: false
#     imu0_relative: false
#     imu0_queue_size: 10
#     imu0_remove_gravitational_acceleration: true

#     use_control: false

#     # process_noise_covariance: [1.0,  0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    1.0,  0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    1e-3, 0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0.3,  0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0.3,  0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0.01, 0,     0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0.5,   0,     0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0.5,   0,    0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0.1,  0,    0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0.3,  0,    0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0.3,  0,    0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0.3,  0,    0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0.3,  0,    0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0.3,  0,
#     #                            0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0.3]

#     # initial_estimate_covariance: [1.0,  0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    1.0,  0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    1e-9, 0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    1.0,  0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    1.0,  0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    1e-9, 0,    0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    1.0,  0,    0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    1.0,  0,    0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    1.0,  0,     0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    1.0,   0,     0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     1.0,   0,     0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     1.0,   0,    0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     1.0,  0,    0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    1.0,  0,
#     #                               0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    1.0]

# https://github.com/weihsinc/robot_localization/blob/master/doc/integrating_gps.rst
navsat_transform_node:
  ros__parameters:
    frequency: 30.0
    delay: 3.0
    magnetic_declination_radians: 0.0  # this taken into account with the calibration or with the madgwick filter
    # loopup here https://www.ngdc.noaa.gov/geomag/calculators/magcalc.shtml
    # value for provo 10.78 deg E +-.37

    # default value for edinburgh
    # magnetic_declination_radians: 0.0429351  # For lat/long 55.944831, -3.186998
    yaw_offset: 0.0  # IMU reads 0 facing east
    zero_altitude: true
    broadcast_cartesian_transform: true
    publish_filtered_gps: true
    use_odometry_yaw: false  #LOOK HERE AGAIN
    # datum: [40.246275, -111.6491, 0.0]      # For lat/long 40.246275, -111.6491 yaw 0.0
    # wait_for_datum: true
    debug: true
    world_frame: 'map'


# TODO: add config for custom ekf node